---
import BaseHead from '../../components/BaseHead.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../../consts';
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';

const albums = await getCollection('albums');
const title = `Gallery | ${SITE_TITLE}`;
const description = `A collection of photo albums from ${SITE_TITLE}`;
---

<html lang="en">
	<head>
		<BaseHead {title} {description} />
		<style>
			.gallery {
				display: grid;
				grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
				gap: 3rem;
				text-align: center;
			}
			.gallery a {
				text-decoration: none;
			}
			.gallery img {
				border-radius: 12px;
				box-shadow: var(--box-shadow);
				transition: 0.2s ease;
			}
			.gallery a:hover img {
				transform: scale(1.05);
			}
			.gallery h2 {
				margin: 0.5rem 0;

				font-size: 1.25rem;
				color: rgb(var(--black));
			}
			.gallery p {
				font-size: 1rem;
				color: rgb(var(--gray));
				margin-top: .5rem;
			}
		</style>
	</head>

	<body>
		<Header />
		<main>
			<h1>Galleryyy</h1>
			<div class="gallery">
				{
					albums.map((album) => (
						<a href={`/gallery/${album.id.split('/')[0]}/`} class="album">
							{/* Debugging line to check album data */}
							<Image src={album.data.cover} alt={album.data.title} width={500} height={300} />
							<h2>{album.data.title}</h2>
							{album.data.description && <p>{album.data.description}</p>}
						</a>
					))
				}
			</div>
		</main>
		<Footer />
	</body>
</html>


